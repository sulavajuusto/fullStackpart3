{"version":3,"sources":["Components/Filter.js","Components/PersonForm.js","Components/Persons.js","Components/Notification.js","Components/Errors.js","services/persons.js","App.js","index.js"],"names":["Filter","filterOnChange","onChange","PersonForm","addPerson","newName","newNumber","handleNumberChange","handlePersonChange","onSubmit","value","type","Persons","filteredPersons","deletePerson","map","person","name","number","onClick","id","Notification","message","className","Errors","error","baseUrl","axios","get","then","response","data","newObject","post","delete","put","App","useState","persons","setPersons","personId","setpersonId","setNewName","setNewNumber","setFilteredPersons","errorMessage","setErrorMessage","confirmMessage","setConfirmMessage","useEffect","personsService","figureHighestId","highest","length","index","console","log","handleSameName","foundPerson","find","x","window","alert","confirm","changedUser","newList","n","setTimeout","catch","event","tempPersons","filter","toString","toLowerCase","indexOf","target","preventDefault","findIndex","tempId","newPerson","concat","personToDelete","p","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8d954fad.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({filterOnChange}) => {\r\n\r\n    return(\r\n        <div>filter shown persons with <input  onChange={filterOnChange} /></div>\r\n    )\r\n}\r\nexport default Filter;\r\n\r\n","import React from 'react';\r\n\r\nconst PersonForm = ({addPerson,newName,newNumber,handleNumberChange,handlePersonChange}) => {\r\n\r\n    return(\r\n        <form onSubmit={addPerson}>\r\n        <div>\r\n          name: <input value={newName} onChange={handlePersonChange} />\r\n        </div>\r\n        <div>number: <input value={newNumber} onChange={handleNumberChange} /></div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm;","import React from 'react';\r\n\r\nconst Persons = ({filteredPersons,deletePerson}) =>{\r\n\r\n\r\n    return(\r\n        <ul>\r\n        {filteredPersons.map(person => \r\n          <li key={person.id}>{person.name} {person.number}\r\n              <button onClick={() => deletePerson(person.id)}>Delete</button></li>\r\n          \r\n          )}\r\n      </ul>\r\n    )\r\n}\r\nexport default Persons;","import React from 'react';\r\nconst Notification = ({  message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className='confirm'>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Notification;","import React from 'react';\r\nconst Errors = ({ error }) => {\r\n    if (error === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className='error'>\r\n        {error}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Errors;","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n  }\r\n  \r\n  const create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\n  const deletePerson = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n  }\r\n  \r\n  const update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\n\r\nexport default { \r\n  getAll: getAll, \r\n  create: create, \r\n  deletePerson: deletePerson, \r\n  update: update \r\n}","import React, { useEffect, useState } from 'react';\r\nimport Filter from './Components/Filter';\r\nimport PersonForm from './Components/PersonForm';\r\nimport Persons from './Components/Persons';\r\nimport Notification from './Components/Notification';\r\nimport Errors from './Components/Errors';\r\nimport personsService from './services/persons'\r\n\r\n\r\nconst App = () => {\r\n\r\n\r\n\r\n  const [persons, setPersons ] = useState([]) \r\n  const [personId, setpersonId] = useState(1)\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [filteredPersons, setFilteredPersons] =  useState([])\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [confirmMessage, setConfirmMessage] = useState(null)\r\n\r\n\r\n useEffect(() => {\r\n  personsService\r\n  .getAll()\r\n   .then(data => {\r\n     setPersons(data);\r\n     setpersonId(figureHighestId(data));\r\n     setFilteredPersons(data);\r\n   })\r\n }, []) \r\n\r\n const figureHighestId = (data) => {\r\n      let highest = 0;\r\n      if (data.length > 0){\r\n        for (let index = 0; index < data.length; index++) {\r\n          const person = data[index];\r\n          if (person.id > highest){\r\n            highest = person.id\r\n          }\r\n        }\r\n      }\r\n      console.log(`highest id ${highest}`);\r\n      return highest;\r\n }\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    if (persons.findIndex(x => x.name === newName) > -1){\r\n      handleSameName()\r\n    }else {\r\n      let tempId = personId;\r\n      tempId++;\r\n      const tempPerson =  {\r\n        name : newName,\r\n        number : newNumber\r\n      }\r\n      personsService\r\n      .create(tempPerson)\r\n      .then(newPerson => {\r\n        \r\n      \r\n\r\n        let newList = persons.concat(newPerson);\r\n        setPersons(newList);\r\n        //lets clear the filter also\r\n        setFilteredPersons(newList);\r\n\r\n        setConfirmMessage(\r\n          `${newPerson.name} was added`\r\n        )\r\n        setTimeout(() => {\r\n          setConfirmMessage(null)\r\n        }, 5000)\r\n      }).catch(error => {\r\n        \r\n        console.log(error.response.data.error)\r\n        setErrorMessage(\r\n          error.response.data.error\r\n        )\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 5000)  \r\n\r\n      })\r\n      setpersonId(tempId);\r\n    }\r\n    setNewName('');\r\n    setNewNumber('');\r\n  }\r\n\r\n  const handleSameName = () =>  {\r\n    \r\n    let foundPerson = persons.find(x => x.name === newName);\r\n    if (newNumber === foundPerson.number){\r\n      window.alert(`${newName} is already added to phonebook`)\r\n    }else {\r\n      if  (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\r\n        const changedUser = { ...foundPerson, number: newNumber };\r\n        personsService.update(foundPerson.id, changedUser)\r\n        .then(data => {\r\n          let newList = persons.map(n => n.id !== data.id ? n : data);\r\n          setPersons(newList);\r\n          //lets clear the filter also\r\n          setFilteredPersons(newList);\r\n          setConfirmMessage(\r\n            `${data.name} phone number was set to ${data.number} `\r\n          )\r\n          setTimeout(() => {\r\n            setConfirmMessage(null)\r\n          }, 5000)\r\n        })\r\n        .catch(error => {\r\n        \r\n          console.log(error.response.data.error)\r\n          setErrorMessage(\r\n            error.response.data.error\r\n          )\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000)  \r\n  \r\n        })\r\n      }\r\n    }\r\n  }\r\n  \r\n  const handlePersonChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n  const filterPersonsChange = (event) => {\r\n    \r\n    const tempPersons = persons.filter(x => x.name.toString().toLowerCase().indexOf(event.target.value?.toString().toLowerCase()) !== -1);\r\n    setFilteredPersons(tempPersons);\r\n  }\r\n\r\n  const deletePerson = (personId) => {\r\n    if  (window.confirm(\"Are you sure you want to delete the user?\")){\r\n      const personToDelete = persons.find(p => p.id === personId);\r\n       personsService.deletePerson(personId)\r\n       .then(data => {\r\n        console.log(data);\r\n        let newList = persons.filter(p => p.id !== personId);\r\n        setPersons(newList);\r\n        //lets clear the filter also\r\n        setFilteredPersons(newList);\r\n       })\r\n       .catch(error => {\r\n        setErrorMessage(\r\n          `Person '${personToDelete.name}' was already removed from server`\r\n        )\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 5000)\r\n      })\r\n      } else {\r\n        console.log(personId);\r\n      }\r\n  }\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={confirmMessage} />\r\n      <Errors error={errorMessage} />\r\n      <Filter filterOnChange={filterPersonsChange}/>\r\n      <h3>Add a new person</h3>\r\n      <PersonForm addPerson={addPerson} newName={newName} newNumber={newNumber} \r\n      handleNumberChange={handleNumberChange} handlePersonChange={handlePersonChange} />\r\n      <h2>Numbers</h2>\r\n      <Persons filteredPersons={filteredPersons} deletePerson={deletePerson} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\n"],"sourceRoot":""}